const path = require('path')
const fs = require('fs').promises
const existsSync = require('fs').existsSync
const klaw = require('klaw')
const { createConverter } = require('convert-svg-to-png')

const svg = (title) => (
`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   inkscape:export-ydpi="96"
   inkscape:export-xdpi="96"
   inkscape:export-filename="/Users/jonas/Downloads/social.png"
   sodipodi:docname="entry.svg"
   inkscape:version="1.0.2 (e86c8708, 2021-01-15)"
   id="svg117"
   version="1.1"
   viewBox="0 0 317.49998 169.8625"
   height="642"
   width="1200">
  <defs
     id="defs111" />
  <sodipodi:namedview
     inkscape:window-maximized="0"
     inkscape:window-y="25"
     inkscape:window-x="0"
     inkscape:window-height="847"
     inkscape:window-width="1440"
     showgrid="false"
     inkscape:document-rotation="0"
     inkscape:current-layer="text142"
     inkscape:document-units="px"
     inkscape:cy="390.01423"
     inkscape:cx="611.15187"
     inkscape:zoom="0.63287027"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     borderopacity="1.0"
     bordercolor="#666666"
     pagecolor="#ffffff"
     id="base"
     units="px" />
  <metadata
     id="metadata114">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     id="layer1"
     inkscape:groupmode="layer"
     inkscape:label="Layer 1">
    <g
       aria-label="terix"
       id="text142"
       style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.4px;line-height:1.25;font-family:Papyrus;-inkscape-font-specification:Papyrus;fill:#ff6600;fill-opacity:1;stroke:none;stroke-width:0.264583">
      <rect
         y="3.4285156e-06"
         x="-5.0000003e-06"
         height="169.86249"
         width="317.5"
         id="rect65"
         style="fill:#000000;fill-rule:evenodd;stroke-width:0.112437" />
      <g
         transform="matrix(0.49234451,0,0,0.50557002,17.991671,21.325106)"
         id="g63">
        <g
           transform="matrix(0.69049693,0,0,0.69049693,-37.076081,-57.036554)"
           id="g21">
          <path
             d="m 58.054708,105.98839 c -0.397523,-0.58357 -0.794974,-1.15363 -1.190655,-1.70658 -1.066018,-1.49316 -2.119657,-2.86676 -3.133959,-4.04787 0.153499,2.33596 0.790947,4.40504 1.715822,6.35377 0.185605,0.39169 0.383786,0.77917 0.59186,1.16216 0.341137,0.629 0.70829,1.2476 1.096929,1.86078 2.044798,3.23657 4.645435,6.33347 6.762706,10.04916 0.09334,0.1651 0.185944,0.33084 0.277678,0.49851 0.242613,0.43973 0.477558,0.88952 0.703415,1.3493 -0.293309,-0.46209 -0.591355,-0.92396 -0.896249,-1.38512 -0.110062,-0.16735 -0.220783,-0.33414 -0.333641,-0.50043 -1.877402,-2.80259 -3.963413,-5.55994 -6.272239,-8.18611 -0.379881,-0.43373 -0.767009,-0.8627 -1.159782,-1.28824 -0.60208,-0.65296 -1.217963,-1.29574 -1.849143,-1.9271 0,0 0,0 -6.02e-4,-7.3e-4 -0.221833,-0.22324 -0.446585,-0.44407 -0.672068,-0.66429 0.113763,0.7726 0.270905,1.48706 0.464192,2.15555 0.691141,2.37456 1.847145,4.1543 3.165554,5.81206 1.052223,1.32405 2.207198,2.57052 3.308761,3.98113 0.111733,0.14248 0.222543,0.28695 0.332571,0.4333 l 6.64e-4,8.1e-4 c 0.348643,0.46328 0.690101,0.94611 1.019566,1.45495 0.03133,0.0483 0.06258,0.0965 0.09318,0.14544 0.05177,0.0821 0.103621,0.16403 0.154665,0.24667 0.115567,0.18753 0.228822,0.37821 0.340965,0.57351 0.04119,0.0722 0.08302,0.14521 0.123375,0.21939 0.250505,0.44928 0.49147,0.92129 0.717806,1.419 -0.368585,-0.52468 -0.748551,-1.04365 -1.141431,-1.55441 -0.03425,-0.046 -0.06911,-0.0924 -0.105415,-0.13782 -0.210881,-0.27433 -0.425482,-0.54561 -0.643734,-0.81386 -0.04845,-0.0601 -0.09765,-0.11951 -0.14684,-0.17894 -0.367031,-0.44808 -0.74489,-0.88843 -1.131166,-1.31935 -0.124136,-0.13963 -0.249194,-0.27726 -0.376249,-0.41448 -0.502041,-0.54407 -1.020544,-1.07207 -1.553599,-1.58184 -0.40408,-0.38528 -0.817222,-0.76058 -1.239061,-1.12251 -0.543691,-0.46882 -1.102208,-0.91673 -1.675815,-1.34102 0.633988,2.04844 1.249143,3.52272 1.855834,4.62809 0.0767,0.14056 0.153359,0.27496 0.230432,0.40407 0.186883,0.31398 0.372692,0.59548 0.559182,0.8492 0.07554,0.10323 0.150033,0.20228 0.225695,0.2967 0.09619,0.12072 0.192261,0.23535 0.288218,0.34389 0.621541,0.70487 1.242419,1.17288 1.87481,1.63384 0.984352,0.71751 1.995479,1.41657 3.077281,2.96467 -0.573367,-0.49124 -1.061519,-0.83169 -1.493025,-1.08422 -0.844378,-0.49454 -1.473437,-0.65411 -2.105597,-0.93845 -0.0409,-0.0181 -0.0817,-0.0374 -0.122467,-0.0569 -0.370904,-0.1778 -0.74759,-0.40893 -1.173411,-0.7861 -0.195977,-0.17416 -0.402626,-0.37906 -0.62437,-0.62464 0.350899,1.04131 0.794789,2.03658 1.410944,2.94867 0.48609,0.7205 1.079213,1.38953 1.817704,1.98774 0.486375,0.39507 1.035188,0.7595 1.65914,1.08774 -0.522873,-0.18064 -0.91534,-0.29486 -1.236531,-0.35429 -0.44747,-0.0835 -0.758694,-0.0622 -1.094197,0.0299 -0.148595,0.0402 -0.302581,0.0946 -0.476503,0.15935 0.290179,0.137 0.572992,0.28754 0.847831,0.45085 0.833045,0.49279 1.598475,1.09962 2.282509,1.7874 0.943274,0.95179 1.730342,2.06002 2.315817,3.23983 0.0012,0.001 9.71e-4,0.004 0.0021,0.006 0.05921,0.11793 0.115021,0.2362 0.168779,0.35494 0.02271,0.0393 0.04534,0.0787 0.06889,0.1161 0.910738,1.46091 2.99103,1.96528 3.231693,-0.14534 -1.79e-4,-0.22735 0.0059,-0.45616 0.01533,-0.68531 0.09727,-2.26152 0.625172,-4.54799 1.371372,-6.7171 0.12263,-0.35986 0.251586,-0.71507 0.386267,-1.06636 0.318484,-0.83598 0.665929,-1.64892 1.028147,-2.43206 0.05703,-0.12385 0.114666,-0.24696 0.172176,-0.36873 0.188512,-0.3983 0.380891,-0.78745 0.574467,-1.16768 -2.392514,-5.1808 -4.238409,-10.93114 -5.826935,-16.54821 -1.241437,-4.3921 -2.326794,-8.703139 -3.39216,-12.595509 -0.245537,-0.89604 -0.489815,-1.76961 -0.734555,-2.61684 -0.893273,-3.092615 -1.795839,-5.836255 -2.788022,-8.032235 -1.03072,3.19706 -1.326971,6.268625 -1.11515,9.254905 0.110776,1.58493 0.365926,3.14562 0.728963,4.68875 0.723091,3.06774 1.876515,6.063779 3.190051,9.033689 0.309898,0.70183 0.630041,1.40259 0.954342,2.1024 0.337373,0.72608 0.680975,1.45071 1.025186,2.17607 1.231951,2.58736 2.488548,5.17163 3.588795,7.78513 -1.370068,-2.436 -2.551811,-4.80277 -3.667809,-7.13492 -0.288776,-0.60308 -0.572921,-1.20504 -0.855249,-1.8048 -0.491406,-1.04374 -0.97588,-2.0821 -1.464625,-3.11815 -0.725561,-1.53747 -1.460287,-3.07106 -2.241822,-4.61043 -0.442003,-0.87196 -0.900103,-1.745429 -1.379408,-2.623619 -1.089491,-1.99675 -2.290763,-4.01353 -3.6835,-6.07344 0.0026,3.34609 0.743765,6.33703 1.878908,9.154089 0.311232,0.77366 0.652752,1.53464 1.016873,2.28557 0.348619,0.72172 0.718491,1.43327 1.103018,2.14011 2.385791,4.38993 5.329473,8.57544 7.318617,13.3467 -2.377829,-4.12325 -5.213663,-8.90617 -8.033554,-13.05563 -0.03557,-0.0534 -0.07243,-0.10693 -0.108732,-0.15978"
             style="fill:#aa0044;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.00952631"
             id="path92" />
          <path
             id="path92-0"
             style="fill:#ffdd55;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.0095263"
             d="m 59.112802,105.98839 c -0.397523,-0.58358 -0.794974,-1.15363 -1.190655,-1.70658 -1.066019,-1.49316 -2.119656,-2.86676 -3.133959,-4.04787 0.153499,2.33596 0.790946,4.40503 1.715822,6.35376 0.185606,0.3917 0.383786,0.77917 0.59186,1.16217 0.341137,0.62899 0.70829,1.24759 1.096929,1.86078 2.044797,3.23657 4.645434,6.33347 6.762705,10.04915 0.09334,0.16511 0.185946,0.33084 0.277679,0.49851 0.242611,0.43973 0.477558,0.88952 0.703421,1.34931 -0.293315,-0.46209 -0.591361,-0.92397 -0.896255,-1.38513 -0.110062,-0.16734 -0.220783,-0.33414 -0.333641,-0.50042 -1.877402,-2.8026 -3.963413,-5.55995 -6.272239,-8.18611 -0.379882,-0.43374 -0.767009,-0.86271 -1.159782,-1.28824 -0.60208,-0.65297 -1.217964,-1.29575 -1.849143,-1.92711 0,0 0,0 -6.03e-4,-7.2e-4 -0.221832,-0.22325 -0.446584,-0.44407 -0.672067,-0.6643 0.113763,0.77261 0.270904,1.48707 0.464193,2.15555 0.691139,2.37456 1.847145,4.15431 3.165553,5.81207 1.052224,1.32405 2.207198,2.57052 3.308761,3.98113 0.111733,0.14247 0.222542,0.28695 0.332571,0.4333 l 6.52e-4,8.6e-4 c 0.348644,0.46329 0.6901,0.94612 1.019566,1.45495 0.03133,0.0483 0.06258,0.0965 0.09318,0.14544 0.05177,0.0821 0.10362,0.16405 0.154665,0.24668 0.115567,0.18752 0.228823,0.3782 0.340966,0.57351 0.04119,0.0722 0.08302,0.14521 0.123374,0.21938 0.250506,0.44929 0.49147,0.92129 0.717806,1.419 -0.368584,-0.52467 -0.74855,-1.04365 -1.141432,-1.55441 -0.03425,-0.046 -0.06911,-0.0924 -0.105414,-0.13782 -0.210882,-0.27433 -0.425482,-0.54561 -0.643734,-0.81385 -0.04845,-0.0601 -0.09765,-0.11951 -0.14684,-0.17895 -0.367031,-0.44808 -0.74489,-0.88842 -1.131166,-1.31934 -0.124136,-0.13964 -0.249195,-0.27725 -0.376248,-0.41449 -0.502041,-0.54407 -1.020545,-1.07207 -1.553599,-1.58184 -0.404081,-0.38527 -0.817223,-0.76058 -1.239062,-1.1225 -0.543691,-0.46882 -1.102207,-0.91673 -1.675815,-1.34102 0.633989,2.04844 1.249144,3.52271 1.855835,4.62809 0.0767,0.14056 0.153358,0.27495 0.230432,0.40407 0.186882,0.31397 0.372691,0.59547 0.559181,0.84919 0.07554,0.10324 0.150033,0.20228 0.225695,0.2967 0.09619,0.12072 0.192262,0.23535 0.288219,0.34389 0.62154,0.70488 1.242418,1.17289 1.874809,1.63385 0.984353,0.71751 1.995479,1.41656 3.07728,2.96467 -0.573365,-0.49125 -1.061518,-0.83169 -1.493023,-1.08423 -0.844379,-0.49453 -1.473438,-0.6541 -2.105597,-0.93844 -0.0409,-0.0181 -0.0817,-0.0374 -0.122468,-0.0569 -0.370903,-0.1778 -0.74759,-0.40893 -1.173411,-0.7861 -0.195977,-0.17415 -0.402625,-0.37905 -0.624369,-0.62463 0.3509,1.0413 0.794789,2.03658 1.410943,2.94867 0.48609,0.72049 1.079214,1.38952 1.817705,1.98773 0.486373,0.39508 1.035188,0.75951 1.65914,1.08775 -0.522874,-0.18065 -0.91534,-0.29487 -1.236532,-0.3543 -0.44747,-0.0835 -0.758694,-0.0622 -1.094197,0.0299 -0.148595,0.0402 -0.302581,0.0946 -0.476503,0.15935 0.29018,0.13701 0.572993,0.28754 0.847829,0.45087 0.833047,0.49277 1.598477,1.0996 2.282513,1.78739 0.943274,0.95179 1.730339,2.06001 2.315814,3.23983 8.88e-4,0.001 5.66e-4,0.004 0.0024,0.006 0.05921,0.11794 0.115018,0.2362 0.168776,0.35495 0.02272,0.0393 0.04533,0.0787 0.06886,0.11609 0.910743,1.46091 2.991033,1.96528 3.231703,-0.14535 -1.4e-4,-0.22734 0.006,-0.45615 0.0153,-0.6853 0.0973,-2.26153 0.62516,-4.54799 1.37136,-6.7171 0.12266,-0.35985 0.2516,-0.71507 0.38627,-1.06636 0.31849,-0.83598 0.66593,-1.64893 1.02815,-2.43206 0.057,-0.12384 0.11462,-0.24696 0.17217,-0.36873 0.18852,-0.3983 0.38089,-0.78745 0.57447,-1.16768 -2.3925,-5.18087 -4.23839,-10.93121 -5.82692,-16.54828 -1.241437,-4.3921 -2.326794,-8.703139 -3.39216,-12.595509 -0.245538,-0.89604 -0.489816,-1.76961 -0.734556,-2.61684 -0.893271,-3.092611 -1.795837,-5.836251 -2.788021,-8.032231 -1.030721,3.19706 -1.32697,6.26862 -1.11515,9.254901 0.110775,1.58493 0.365925,3.14563 0.728963,4.68875 0.723091,3.06774 1.876514,6.063779 3.190051,9.033699 0.309897,0.70182 0.630041,1.40259 0.954341,2.10239 0.337375,0.72608 0.680976,1.45071 1.025187,2.17607 1.231948,2.58736 2.488545,5.17163 3.588795,7.78513 -1.37007,-2.43599 -2.551806,-4.80277 -3.667809,-7.13492 -0.288776,-0.60308 -0.572921,-1.20504 -0.85525,-1.8048 -0.491406,-1.04374 -0.975879,-2.08209 -1.464625,-3.11815 -0.72556,-1.53747 -1.460286,-3.07106 -2.241822,-4.61043 -0.442001,-0.87196 -0.900103,-1.745429 -1.379407,-2.623609 -1.08949,-1.99676 -2.290764,-4.01354 -3.6835,-6.07345 0.0026,3.34609 0.743764,6.33703 1.878908,9.154089 0.311231,0.77367 0.652752,1.53464 1.016874,2.28557 0.348618,0.72172 0.71849,1.43327 1.103017,2.14011 2.38579,4.38993 5.329472,8.57544 7.318614,13.3467 -2.377826,-4.12325 -5.213661,-8.90616 -8.033551,-13.05563 -0.03558,-0.0534 -0.07243,-0.10693 -0.108731,-0.15978" />
        </g>
        <path
           id="path41"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.4px;font-family:Pacifico;-inkscape-font-specification:Pacifico;fill:#ff6600;stroke-width:0.264583"
           d="m 19.127053,40.763031 q 0.3302,0 0.508,0.3048 0.2032,0.3048 0.2032,0.8382 0,1.016 -0.4826,1.5748 -1.0922,1.3462 -2.3876,2.2098 -1.2954,0.8636 -2.9718,0.8636 -5.1816,0 -5.1816,-7.2898 0,-1.1176 0.0762,-2.2606 h -0.9906 q -0.762,0 -1.0414,-0.2794 -0.254,-0.2794 -0.254,-0.889 0,-1.4224 1.143,-1.4224 h 1.4478 q 0.4317999,-2.794 1.3208,-5.1054 0.889,-2.3114 2.1336,-3.683 1.27,-1.3716 2.7178,-1.3716 1.0668,0 1.6764,0.9398 0.6096,0.9398 0.6096,2.3622 0,3.937 -3.302,6.858 h 2.8448 q 0.4064,0 0.5842,0.1778 0.1778,0.1778 0.1778,0.6604 0,1.7526 -2.8702,1.7526 h -3.0988 q -0.0508,1.27 -0.0508,1.9812 0,2.6416 0.6096,3.7084 0.635,1.0668 1.9812,1.0668 1.0922,0 1.9304,-0.6604 0.8382,-0.6604 1.9812,-1.9812 0.3048,-0.3556 0.6858,-0.3556 z m -4.445,-14.0716 q -0.381,0 -0.8636,0.9652 -0.4572,0.9398 -0.889,2.6416 -0.4064,1.6764 -0.6858,3.7338 1.4986,-1.2954 2.2352,-2.8956 0.762,-1.6256 0.762,-2.9464 0,-1.4986 -0.5588,-1.4986 z" />
        <path
           id="path43"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.4px;font-family:Pacifico;-inkscape-font-specification:Pacifico;fill:#ff6600;stroke-width:0.264583"
           d="m 29.098537,40.763031 q 0.3302,0 0.508,0.3048 0.2032,0.3048 0.2032,0.8382 0,1.016 -0.4826,1.5748 -0.9398,1.143 -2.667,2.1082 -1.7018,0.9652 -3.6576,0.9652 -2.667,0 -4.1402,-1.4478 -1.4732,-1.4478 -1.4732,-3.9624 0,-1.7526 0.7366,-3.2512 0.7366,-1.524 2.032,-2.413 1.3208,-0.889 2.9718,-0.889 1.4732,0 2.3622,0.889 0.889,0.8636 0.889,2.3622 0,1.7526 -1.27,3.0226 -1.2446,1.2446 -4.2418,1.9812 0.635,1.1684 2.413,1.1684 1.143,0 2.5908,-0.7874 1.4732,-0.8128 2.54,-2.1082 0.3048,-0.3556 0.6858,-0.3556 z m -6.4008,-3.683 q -0.9398,0 -1.6002,1.0922 -0.635,1.0922 -0.635,2.6416 v 0.0508 q 1.4986,-0.3556 2.3622,-1.0668 0.8636,-0.7112 0.8636,-1.651 0,-0.4826 -0.2794,-0.762 -0.254,-0.3048 -0.7112,-0.3048 z" />
        <path
           id="path45"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.4px;font-family:Pacifico;-inkscape-font-specification:Pacifico;fill:#ff6600;stroke-width:0.264583"
           d="m 29.545021,46.554231 q -0.9652,0 -1.3716,-1.016 -0.381,-1.016 -0.381,-3.2512 0,-3.302 0.9398,-6.2738 0.2286,-0.7366 0.7366,-1.0668 0.5334,-0.3556 1.4732,-0.3556 0.508,0 0.7112,0.127 0.2032,0.127 0.2032,0.4826 0,0.4064 -0.381,1.8288 -0.254,1.016 -0.4064,1.778 -0.1524,0.762 -0.254,1.8796 0.8382,-2.1844 1.8796,-3.556 1.0414,-1.3716 2.032,-1.9558 1.016,-0.5842 1.8542,-0.5842 1.651,0 1.651,1.651 0,0.3302 -0.2286,1.6002 -0.2032,1.016 -0.2032,1.27 0,0.889 0.635,0.889 0.7112,0 1.8288,-1.1176 0.3302,-0.3302 0.6858,-0.3302 0.3302,0 0.508,0.3048 0.2032,0.2794 0.2032,0.762 0,0.9398 -0.508,1.4732 -0.7112,0.7366 -1.6764,1.27 -0.9398,0.508 -2.0066,0.508 -1.3462,0 -2.0574,-0.6858 -0.6858,-0.6858 -0.6858,-1.8542 0,-0.381 0.0762,-0.762 0.0508,-0.508 0.0508,-0.6858 0,-0.4064 -0.2794,-0.4064 -0.381,0 -1.016,0.8636 -0.6096,0.8382 -1.2192,2.2352 -0.6096,1.397 -0.9906,2.9464 -0.2794,1.1938 -0.6604,1.6256 -0.3556,0.4064 -1.143,0.4064 z" />
        <path
           id="path47"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.4px;font-family:Pacifico;-inkscape-font-specification:Pacifico;fill:#ff6600;stroke-width:0.264583"
           d="m 42.628006,32.914431 q -1.0668,0 -1.6002,-0.4826 -0.5334,-0.508 -0.5334,-1.397 0,-0.889 0.6858,-1.4732 0.7112,-0.6096 1.7526,-0.6096 0.9398,0 1.524,0.4572 0.5842,0.4572 0.5842,1.2954 0,1.016 -0.6604,1.6256 -0.6604,0.5842 -1.7526,0.5842 z m -0.2032,13.6398 q -1.651,0 -2.413,-1.1684 -0.7366,-1.1684 -0.7366,-3.0988 0,-1.143 0.2794,-2.921 0.3048,-1.8034 0.762,-3.3528 0.2286,-0.8128 0.6096,-1.1176 0.381,-0.3048 1.2192,-0.3048 1.2954,0 1.2954,0.8636 0,0.635 -0.4826,2.9464 -0.6096,2.794 -0.6096,3.7846 0,0.762 0.2032,1.1684 0.2032,0.4064 0.6858,0.4064 0.4572,0 1.143,-0.635 0.6858,-0.635 1.8288,-2.0066 0.3048,-0.3556 0.6858,-0.3556 0.3302,0 0.508,0.3048 0.2032,0.3048 0.2032,0.8382 0,1.016 -0.4826,1.5748 -2.5146,3.0734 -4.699,3.0734 z" />
        <path
           id="path49"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.4px;font-family:Pacifico;-inkscape-font-specification:Pacifico;fill:#ff6600;stroke-width:0.264583"
           d="m 58.835584,41.525031 q 0.3302,0 0.508,0.3048 0.2032,0.3048 0.2032,0.8382 0,0.9144 -0.4318,1.5748 -1.4986,2.3114 -4.2672,2.3114 -1.1938,0 -2.1336,-0.4572 -0.9144,-0.4826 -1.4986,-1.3716 -1.4732,1.8034 -3.429,1.8034 -1.397,0 -2.2098,-0.8128 -0.8128,-0.8128 -0.8128,-2.159 0,-1.27 0.5842,-2.0574 0.5842,-0.7874 1.651,-0.7874 0.9144,0 0.9144,0.6858 0,0.2032 -0.0508,0.7112 l -0.0762,0.9652 q 0,0.762 0.6604,0.762 0.4826,0 0.9144,-0.5588 0.4572,-0.5842 0.7366,-1.5748 0.3048,-0.9906 0.3048,-2.1844 0,-0.9144 -0.2286,-1.524 -0.2286,-0.635 -0.5588,-0.635 -0.2794,0 -0.4064,0.1524 -0.127,0.127 -0.254,0.4572 -0.1524,0.4064 -0.4064,0.6604 -0.254,0.2286 -0.889,0.2286 -0.5588,0 -0.889,-0.381 -0.3302,-0.4064 -0.3302,-1.2192 0,-1.2954 0.7874,-2.032 0.7874,-0.7366 2.032,-0.7366 1.0668,0 1.9304,0.5334 0.8636,0.508 1.3208,1.4986 0.762,-1.016 1.7018,-1.524 0.9652,-0.508 1.8796,-0.508 0.9906,0 1.4986,0.4572 0.5334,0.4572 0.5334,1.4732 0,1.143 -0.4318,1.8034 -0.4318,0.635 -1.0414,0.635 -0.5588,0 -0.762,-0.2286 -0.2032,-0.2286 -0.3048,-0.6604 -0.0508,-0.3048 -0.1524,-0.4572 -0.1016,-0.1524 -0.3556,-0.1524 -0.3048,0 -0.6604,0.5842 -0.3302,0.5588 -0.5842,1.4986 -0.2286,0.9398 -0.2286,1.9558 0,1.143 0.508,1.8288 0.5334,0.6858 1.27,0.6858 1.397,0 2.7686,-2.0066 0.254,-0.381 0.6858,-0.381 z" />
      </g>
      <text
         xml:space="preserve"
         style="font-size:50.8px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';stroke-width:0.0700042"
         x="15.468546"
         y="90.720932"
         id="text28"><tspan
           sodipodi:role="line"
           id="tspan26"
           x="15.468546"
           y="90.720932"
           style="stroke-width:0.0700042" /></text>
      <text
         xml:space="preserve"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:50.8px;line-height:1.25;font-family:'System Font';-inkscape-font-specification:'System Font';stroke-width:0.0700042"
         x="14.21434"
         y="107.86176"
         id="text32"><tspan
           sodipodi:role="line"
           id="tspan30"
           x="14.21434"
           y="107.86176"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:'System Font';-inkscape-font-specification:'System Font';stroke-width:0.0700042" /></text>
      <text
         xml:space="preserve"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:16.6676px;line-height:1.25;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue Bold';stroke-width:0.055124"
         x="17.991661"
         y="87.417542"
         id="text877"><tspan
           sodipodi:role="line"
           id="tspan875"
           x="17.991661"
           y="87.417542"
           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:16.6676px;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue Bold';fill:#f9f9f9;stroke-width:0.055124">fastify-vite</tspan></text>
      <text
         xml:space="preserve"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:2.77792px;line-height:1.25;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue';fill:#ff6600;fill-opacity:1;stroke:none;stroke-width:0.055124"
         x="16.429018"
         y="99.176323"
         id="text36-7"><tspan
           sodipodi:role="line"
           x="16.429018"
           y="99.176323"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:8.33374px;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue';fill:#f5f7fa;fill-opacity:1;stroke-width:0.055124"
           id="tspan38-4"
           rotate="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0"
           dx="0 0 0 0 0 0 0 -0.98761541"><tspan
   style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:8.33374px;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue';fill:#ffa366;fill-opacity:1;stroke-width:0.055124"
   id="tspan867-5"
   rotate="0 0 0 0 0 0 0 0"
   dx="0.98761541">Fastify</tspan> plugin for <tspan
   style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:8.33374px;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue';fill:#ffa366;fill-opacity:1;stroke-width:0.055124"
   id="tspan869-1"
   rotate="0 0 0 0 0">Vite</tspan> integration</tspan><tspan
           sodipodi:role="line"
           x="16.429018"
           y="104.35899"
           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.8896px;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue';fill:#f5f7fa;fill-opacity:1;stroke-width:0.055124"
           rotate="0"
           id="tspan883-6" /></text>
      <text
         xml:space="preserve"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:28.2222px;line-height:1.25;font-family:'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue Bold';fill:#ff6600;fill-opacity:1;stroke:none;stroke-width:0.055124"
         x="17.991667"
         y="146.88046"
         id="text877-9"><tspan
           sodipodi:role="line"
           id="tspan875-3"
           x="17.991667"
           y="146.88046"
           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:28.2222px;font-family:sans-serif,'Helvetica Neue';-inkscape-font-specification:'Helvetica Neue Bold';fill:#ffa366;fill-opacity:1;stroke-width:0.055124">${title}</tspan></text>
    </g>
  </g>
</svg>`)

const titleRe = /<title>(.*?) \| fastify-vite<\/title>/

async function main() {
   const converter = createConverter()
   const htmls = await walkRead(path.resolve(__dirname,'.vitepress', 'dist'), [/\.html$/])
   if (!existsSync(path.resolve(__dirname, 'covers'))) {
      await fs.mkdir(path.resolve(__dirname, 'covers'))
   }
   for (const html of htmls) {
      if (html.name === 'index.html') {
         continue
      }
      const title = html.contents.match(titleRe)[1]
      const pngName = `${path.parse(html.name).name}.png`
      const pngPath = path.join(
         path.resolve(__dirname, 'covers'),
         pngName
      )
      if (!existsSync(pngPath)) {
         const png = await converter.convert(svg(title))
         await fs.writeFile(pngPath, png)
      }
      for (const re of [
         /<meta property="og:image" content="([^"]+)">/g,
         /<meta name="twitter:image" content="([^"]+)">/g
      ]) {
         html.contents = html.contents.replace(re, (...m) => {
            return m[0].replace(m[1], `https://fastify-vite.dev/${pngName}`)
         })
      }
      await fs.writeFile(path.join(__dirname, '.vitepress', 'dist', html.name), html.contents)
   }
}

async function walkRead (dir, patterns) {
  const promises = []
  const sliceAt = dir.length + (dir.endsWith('/') ? 0 : 1)

  for await (const match of klaw(dir)) {
    const pathEntry = sliceAt ? match.path.slice(sliceAt) : match.path
    if (patterns.some(pattern => pattern.test(pathEntry))) {
      promises.push(
        fs.readFile(path.resolve(dir, pathEntry), 'utf8')
          .then(contents => ({ name: pathEntry, contents })),
      )
    }
  }
  return Promise.all(promises)
}

if (require.main === module) {
   main().then(() => process.exit())
}
